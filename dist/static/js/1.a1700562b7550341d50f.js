webpackJsonp([1],{385:function(e,t,s){var a=s(137)(s(466),s(542),null,null,null);e.exports=a.exports},389:function(e,t,s){var a=s(137)(s(470),s(560),null,null,null);e.exports=a.exports},435:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Help",data:function(){return{hasSent:!1,subject:"",message:""}},methods:{me:function(){this.data=this.$store.getters["auth/me"]},clear:function(){this.$refs.form.reset()},save:function(){this.hasSent=!0,this.$store.dispatch("createRequests",{action:"help",message:this.subject,status:"waiting",meta_data:{text:this.message}}),this.$store.dispatch("notify",{id:0,message:""+this.$i18n.t("notifications.request_created"),color:""}),this.active=!1,this.subject="",this.message=""}}}},450:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(1),i=s.n(a);t.default={name:"Requests",data:function(){return{doAction:!1,search:"",pagination:{sortBy:"last_change",descending:"true",rowsPerPage:10},dialogMessage:!1,dialogDetail:!1,dialogCancel:!1,dialogConfirm:!1,dialogDelete:!1,message_cancel:"Cancel this request",headers:[{text:"Id",value:"id",width:"5%"},{text:this.$t("requests.user"),value:"users",width:"5%",user:!1},{text:this.$t("requests.action"),sortable:!0,value:"action",width:"5%"},{text:this.$t("requests.status"),value:"status",width:"5%"},{text:this.$t("requests.message"),value:"message",width:"25%"},{text:this.$t("requests.changed"),value:"last_change",width:"25%"},{text:this.$t("requests.actions"),value:"actions",sortable:!1,width:"15%"}],valid:!1,editedItemId:-1,editedIndex:-1,editedItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""},defaultItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""}}},watch:{dialog:function(e){return e||this.close()}},methods:{formatDate:function(e){return e?e.substring(0,e.length-5):"-"},formatMetaData:function(e){return e||""},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="answered",this.dialogMessage=!0},confirmItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="confirmed",this.dialogConfirm=!0},detailItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.dialogDetail=!0},cancelItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="cancelled",this.editedItem.message=this.message_cancel,this.dialogCancel=!0},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.dialogDelete=!0},deleteItem:function(){var e=this;if(this.editedIndex>-1){var t=this.editedItem,s=this.items.indexOf(t);this.items.splice(s,1),this.$store.dispatch("deleteRequests",t.id),setTimeout(function(){e.$store.dispatch("fetchRequests")},500)}},close:function(){var e=this;this.dialogMessage=!1,this.dialogDetail=!1,this.dialogCancel=!1,this.dialogConfirm=!1,setTimeout(function(){e.editedItem=i()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status}),setTimeout(function(){e.$store.dispatch("fetchRequests")},500),this.close()},saveConfirm:function(){var e=this;this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status}),this.doAction&&("create"===this.editedItem.action&&this.$store.dispatch("createInstance",this.editedItem.meta_data),"upgrade"===this.editedItem.action&&this.$store.dispatch("upgradeInstance",this.editedItem.meta_data),"clone"===this.editedItem.action&&this.$store.dispatch("cloneInstance",this.editedItem.meta_data),"delete"===this.editedItem.action&&this.$store.dispatch("deleteInstance",this.editedItem.meta_data.id)),setTimeout(function(){e.$store.dispatch("fetchRequests")},500),this.close()},refreshData:function(){this.$store.dispatch("fetchRequests")}},computed:{items:function(){return this.$store.getters.requestsTableData},me:function(){return this.$store.getters["auth/me"]},computedHeaders:function(){var e=this;return this.headers.filter(function(t){return!(t.user===e.me.admin)})}},created:function(){this.$store.dispatch("fetchRequests")}}},466:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(491),i=s.n(a);t.default={name:"container",components:{help:i.a},data:function(){return{}}}},470:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(506),i=s.n(a);t.default={name:"container",components:{requests:i.a},data:function(){return{}}}},491:function(e,t,s){var a=s(137)(s(435),s(534),null,null,null);e.exports=a.exports},506:function(e,t,s){var a=s(137)(s(450),s(530),null,null,null);e.exports=a.exports},530:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"grid-list-md":""}},[s("v-card",[s("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[s("v-icon",[e._v("refresh")])],1),e._v(" "),s("v-card-title",[s("v-dialog",{attrs:{"max-width":"520"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Are you sure to delete request from history?")]),e._v(" "),s("v-card-text",[e._v("This action cannot by undo.")]),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Disagree")]),e._v(" "),s("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}},nativeOn:{click:function(t){return e.deleteItem(t)}}},[e._v("Agree")])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Confirm Request")])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n                Metadata:\n              ")]),e._v(" "),s("v-flex",[s("ul",{attrs:{id:"metadataconfirm"}},e._l(e.formatMetaData(e.editedItem.meta_data),function(t,a){return s("li",{key:a},[e._v("\n                    "+e._s(a)+": "+e._s(t)+"\n                  ")])}),0)]),e._v(" "),s("v-flex",[s("v-checkbox",{attrs:{label:"Do action: "+e.editedItem.message},model:{value:e.doAction,callback:function(t){e.doAction=t},expression:"doAction"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveConfirm}},[e._v("Confirm")])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{attrs:{label:"Message"},model:{value:e.editedItem.message,callback:function(t){e.$set(e.editedItem,"message",t)},expression:"editedItem.message"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Send")])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogCancel,callback:function(t){e.dialogCancel=t},expression:"dialogCancel"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Cancel Request")])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{attrs:{label:"Message"},model:{value:e.message_cancel,callback:function(t){e.message_cancel=t},expression:"message_cancel"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Cancel request")])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDetail,callback:function(t){e.dialogDetail=t},expression:"dialogDetail"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Request Detail")])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Action"},model:{value:e.editedItem.action,callback:function(t){e.$set(e.editedItem,"action",t)},expression:"editedItem.action"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Status"},model:{value:e.editedItem.status,callback:function(t){e.$set(e.editedItem,"status",t)},expression:"editedItem.status"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{attrs:{label:"Message"},model:{value:e.editedItem.message,callback:function(t){e.$set(e.editedItem,"message",t)},expression:"editedItem.message"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-text-field",{attrs:{value:e.formatDate(e.editedItem.created_on),label:"Created"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-text-field",{attrs:{value:e.formatDate(e.editedItem.changed_on),label:"Changed"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n                Metadata:\n              ")]),e._v(" "),s("v-flex",[s("ul",{attrs:{id:"metadata"}},e._l(e.formatMetaData(e.editedItem.meta_data),function(t,a){return s("li",{key:a},[e._v("\n                    "+e._s(a)+": "+e._s(t)+"\n                  ")])}),0)])],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")])],1)],1)],1),e._v(" "),s("v-spacer"),e._v(" "),s("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?s("v-data-table",{attrs:{headers:e.computedHeaders,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.users",fn:function(t){var a=t.item;return e._l(a.users,function(t){return s("span",[s("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1)})}},{key:"item.last_change",fn:function(t){var s=t.item;return[e._v("\n      "+e._s(e.formatDate(s.last_change))+"\n    ")]}},{key:"item.actions",fn:function(t){var a=t.item;return[e.me.admin?s("v-icon",{attrs:{disabled:"confirmed"===a.status||"cancelled"===a.status},on:{click:function(t){return e.confirmItem(a)}}},[e._v("\n            check\n          ")]):e._e(),e._v(" "),s("v-icon",{attrs:{disabled:"confirmed"===a.status},on:{click:function(t){return e.editItem(a)}}},[e._v("\n            message\n          ")]),e._v(" "),s("v-icon",{attrs:{disabled:"cancelled"===a.status||"confirmed"===a.status},on:{click:function(t){return e.cancelItem(a)}}},[e._v("\n            cancel\n          ")]),e._v(" "),s("v-icon",{on:{click:function(t){return e.detailItem(a)}}},[e._v("\n            more\n          ")]),e._v(" "),e.me.admin?s("v-icon",{on:{click:function(t){return e.deleteDialog(a)}}},[e._v("\n            delete\n          ")]):e._e()]}}],null,!1,2669052565)},[e._v(" "),e._v(" "),e._v(" "),s("template",{slot:"no-data"},[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])],1)],2):e._e()],1)],1)},staticRenderFns:[]}},534:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"grid-list-md":""}},[s("v-card",{staticClass:"hide-overflow"},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-app-bar",{attrs:{flat:"",color:""}},[s("v-icon",[e._v("mdi-account")]),e._v(" "),s("v-toolbar-title",{staticClass:"font-weight-light"},[e._v(e._s(e.$t("help.title")))]),e._v(" "),s("v-spacer")],1),e._v(" "),s("v-card-text",[s("v-text-field",{attrs:{label:e.$t("help.subject")},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}}),e._v(" "),s("v-textarea",{attrs:{label:e.$t("help.message")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),s("v-divider"),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"grey",dark:""},on:{click:e.clear}},[e._v("\n        "+e._s(e.$t("actions.cancel"))+"\n      ")]),e._v(" "),s("v-btn",{attrs:{color:"success"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("actions.save"))+"\n      ")])],1)],1)],1)],1)},staticRenderFns:[]}},542:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("help")],1)},staticRenderFns:[]}},560:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("requests")],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.a1700562b7550341d50f.js.map