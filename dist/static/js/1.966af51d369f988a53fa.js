webpackJsonp([1],{385:function(e,t,a){var s=a(137)(a(464),a(537),null,null,null);e.exports=s.exports},389:function(e,t,a){var s=a(137)(a(468),a(555),null,null,null);e.exports=s.exports},434:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Help",data:function(){return{hasSent:!1,subject:"",message:""}},methods:{me:function(){this.data=this.$store.getters["auth/me"]},clear:function(){this.$refs.form.reset()},save:function(){this.hasSent=!0,this.$store.dispatch("createRequests",{action:"help",message:this.subject,status:"waiting",meta_data:{text:this.message}}),this.$store.dispatch("notify",{id:0,message:""+this.$i18n.t("notifications.request_created"),color:""}),this.active=!1,this.subject="",this.message=""}}}},448:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),i=a.n(s);t.default={name:"Requests",data:function(){return{doAction:!1,search:"",pagination:{sortBy:"last_change",descending:"true",rowsPerPage:10},dialogMessage:!1,dialogDetail:!1,dialogCancel:!1,dialogConfirm:!1,dialogDelete:!1,message_cancel:"Cancel this request",headers:[{text:this.$t("requests.user"),value:"users",width:"5%",user:!1},{text:this.$t("requests.action"),sortable:!0,value:"action",width:"5%"},{text:this.$t("requests.status"),value:"status",width:"5%"},{text:this.$t("requests.message"),value:"message",width:"25%"},{text:this.$t("requests.changed"),value:"last_change",width:"25%"},{text:this.$t("requests.actions"),value:"actions",sortable:!1,width:"15%"}],valid:!1,editedItemId:-1,editedIndex:-1,editedItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""},defaultItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""}}},watch:{dialog:function(e){return e||this.close()}},methods:{formatDate:function(e){return new Date(e).toDateString()},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="answered",this.dialogMessage=!0},confirmItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="confirmed",this.dialogConfirm=!0},detailItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.dialogDetail=!0},cancelItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.editedItemId=e.id,this.editedItem.status="cancelled",this.editedItem.message=this.message_cancel,this.dialogCancel=!0},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=i()({},e),this.dialogDelete=!0},deleteItem:function(){var e=this;if(this.editedIndex>-1){var t=this.editedItem,a=this.items.indexOf(t);this.items.splice(a,1),this.$store.dispatch("deleteRequests",t.id),setTimeout(function(){e.$store.dispatch("fetchRequests")},500)}},close:function(){var e=this;this.dialogMessage=!1,this.dialogDetail=!1,this.dialogCancel=!1,this.dialogConfirm=!1,setTimeout(function(){e.editedItem=i()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status}),setTimeout(function(){e.$store.dispatch("fetchRequests")},500),this.close()},saveConfirm:function(){var e=this;this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status});var t=this.editedItem.meta_data.replace(/'/g,'"');this.doAction&&("create"===this.editedItem.action&&this.$store.dispatch("createInstance",JSON.parse(t)),"upgrade"===this.editedItem.action&&this.$store.dispatch("upgradeInstance",JSON.parse(t)),"clone"===this.editedItem.action&&this.$store.dispatch("cloneInstance",JSON.parse(t)),"delete"===this.editedItem.action&&this.$store.dispatch("deleteInstance",JSON.parse(t).id)),setTimeout(function(){e.$store.dispatch("fetchRequests")},500),this.close()},refreshData:function(){this.$store.dispatch("fetchRequests")}},computed:{items:function(){return this.$store.getters.requestsTableData},me:function(){return this.$store.getters["auth/me"]},computedHeaders:function(){var e=this;return this.headers.filter(function(t){return!(t.user===e.me.admin)})}},created:function(){this.$store.dispatch("fetchRequests")}}},464:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(488),i=a.n(s);t.default={name:"container",components:{help:i.a},data:function(){return{}}}},468:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(502),i=a.n(s);t.default={name:"container",components:{requests:i.a},data:function(){return{}}}},488:function(e,t,a){var s=a(137)(a(434),a(530),null,null,null);e.exports=s.exports},502:function(e,t,a){var s=a(137)(a(448),a(526),null,null,null);e.exports=s.exports},526:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-card",[a("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[a("v-icon",[e._v("refresh")])],1),e._v(" "),a("v-card-title",[a("v-dialog",{attrs:{"max-width":"490"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Are you sure to delete request?")]),e._v(" "),a("v-card-text",[e._v("This action cannot by undo.")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Disagree")]),e._v(" "),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}},nativeOn:{click:function(t){return e.deleteItem(t)}}},[e._v("Agree")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Confirm Request")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-textarea",{attrs:{name:"meta_data",label:"Metadata"},model:{value:e.editedItem.meta_data,callback:function(t){e.$set(e.editedItem,"meta_data",t)},expression:"editedItem.meta_data"}})],1),e._v(" "),a("v-flex",[a("v-checkbox",{attrs:{label:"Do action: "+e.editedItem.message},model:{value:e.doAction,callback:function(t){e.doAction=t},expression:"doAction"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveConfirm}},[e._v("Confirm")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:e.editedItem.message,callback:function(t){e.$set(e.editedItem,"message",t)},expression:"editedItem.message"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Send")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogCancel,callback:function(t){e.dialogCancel=t},expression:"dialogCancel"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Cancel Request")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:e.message_cancel,callback:function(t){e.message_cancel=t},expression:"message_cancel"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Cancel request")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDetail,callback:function(t){e.dialogDetail=t},expression:"dialogDetail"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Request Detail")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Action"},model:{value:e.editedItem.action,callback:function(t){e.$set(e.editedItem,"action",t)},expression:"editedItem.action"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Status"},model:{value:e.editedItem.status,callback:function(t){e.$set(e.editedItem,"status",t)},expression:"editedItem.status"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:e.editedItem.message,callback:function(t){e.$set(e.editedItem,"message",t)},expression:"editedItem.message"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Created"},model:{value:e.editedItem.created_on,callback:function(t){e.$set(e.editedItem,"created_on",t)},expression:"editedItem.created_on"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Changed"},model:{value:e.editedItem.changed_on,callback:function(t){e.$set(e.editedItem,"changed_on",t)},expression:"editedItem.changed_on"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-textarea",{attrs:{name:"meta_data",label:"Metadata"},model:{value:e.editedItem.meta_data,callback:function(t){e.$set(e.editedItem,"meta_data",t)},expression:"editedItem.meta_data"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Close")])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?a("v-data-table",{attrs:{headers:e.computedHeaders,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.users",fn:function(t){var s=t.item;return e._l(s.users,function(t){return a("span",[a("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1)})}},{key:"item.last_change",fn:function(t){var a=t.item;return[e._v("\n      "+e._s(e.formatDate(a.last_change))+"\n    ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[e.me.admin?a("v-icon",{attrs:{disabled:"confirmed"===s.status||"cancelled"===s.status},on:{click:function(t){return e.confirmItem(s)}}},[e._v("\n            check\n          ")]):e._e(),e._v(" "),a("v-icon",{attrs:{disabled:"confirmed"===s.status},on:{click:function(t){return e.editItem(s)}}},[e._v("\n            message\n          ")]),e._v(" "),a("v-icon",{attrs:{disabled:"cancelled"===s.status||"confirmed"===s.status},on:{click:function(t){return e.cancelItem(s)}}},[e._v("\n            cancel\n          ")]),e._v(" "),a("v-icon",{on:{click:function(t){return e.detailItem(s)}}},[e._v("\n            more\n          ")]),e._v(" "),e.me.admin?a("v-icon",{on:{click:function(t){return e.deleteDialog(s)}}},[e._v("\n            delete\n          ")]):e._e()]}}],null,!1,2669052565)},[e._v(" "),e._v(" "),e._v(" "),a("template",{slot:"no-data"},[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])],1)],2):e._e()],1)],1)},staticRenderFns:[]}},530:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-card",{staticClass:"hide-overflow"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-app-bar",{attrs:{flat:"",color:""}},[a("v-icon",[e._v("mdi-account")]),e._v(" "),a("v-toolbar-title",{staticClass:"font-weight-light"},[e._v(e._s(e.$t("help.title")))]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:e.$t("help.subject")},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}}),e._v(" "),a("v-textarea",{attrs:{label:e.$t("help.message")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey",dark:""},on:{click:e.clear}},[e._v("\n        "+e._s(e.$t("actions.cancel"))+"\n      ")]),e._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("actions.save"))+"\n      ")])],1)],1)],1)],1)},staticRenderFns:[]}},537:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("help")],1)},staticRenderFns:[]}},555:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("requests")],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.966af51d369f988a53fa.js.map