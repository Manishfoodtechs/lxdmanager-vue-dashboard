webpackJsonp([9],{384:function(e,t,i){var s=i(137)(i(463),i(535),null,null,null);e.exports=s.exports},433:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=i.n(s);t.default={name:"groups",data:function(){return{search:"",pagination:{sortBy:"state",rowsPerPage:10},dialog:!1,dialogDelete:!1,show3:!1,checkbox:!1,headers:[{text:"id",align:"left",value:"id",width:"1%"},{text:"name",align:"left",value:"name"},{text:"abilities",align:"left",value:"abilities",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],editedIndex:-1,editedItem:{id:"",abilities:""},defaultItem:{name:"",abilities:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Group":"Edit Group"},formNew:function(){return-1===this.editedIndex},items:function(){return this.$store.getters.groupsTableData},abilitiesId:function(){return this.$store.getters.abilitiessTableData.map(function(e){return{name:e.name,id:e.id}})}},watch:{dialog:function(e){return e||this.close()}},methods:{removeAbility:function(e){var t=this.editedItem.abilities.findIndex(function(t){return t.id===e.id});t>=0&&this.editedItem.abilities.splice(t,1)},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem.id=e.id,this.editedItem.name=e.name,this.editedItem.abilities=e.relationships.abilities.map(function(e){return{id:e.id}}),this.dialog=!0},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=n()({},e),this.dialogDelete=!0},deleteItem:function(){var e=this;if(this.editedIndex>-1){var t=this.editedItem;if(console.log(t),"admin"!==t.name){var i=this.items.indexOf(t);this.items.splice(i,1),this.$store.dispatch("deleteGroup",t.id),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)}else console.log("Delete this group is not allowed")}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=n()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;this.$refs.form.validate()&&(this.editedIndex>-1?(n()(this.items[this.editedIndex],this.editedItem),console.log(this.editedItem),console.log(this.items),this.$store.dispatch("updateGroup",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)):(this.items.push(this.editedItem),this.$store.dispatch("createGroup",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)),this.close())},refreshData:function(){this.$store.dispatch("fetchGroups"),this.$store.dispatch("fetchAbilities")}},mounted:function(){this.$store.dispatch("fetchGroups"),this.$store.dispatch("fetchAbilities")}}},463:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(487),n=i.n(s);t.default={name:"container",components:{groups:n.a},data:function(){return{}}}},487:function(e,t,i){var s=i(137)(i(433),i(539),null,null,null);e.exports=s.exports},535:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("groups")],1)},staticRenderFns:[]}},539:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"grid-list-md":""}},[i("v-card",[i("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[i("v-icon",[e._v("refresh")])],1),e._v(" "),i("v-card-title",[i("v-dialog",{attrs:{"max-width":"490"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Are you sure to delete user "+e._s(e.editedItem.name)+"?")]),e._v(" "),i("v-card-text",[e._v("This action cannot by undo.")]),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Disagree")]),e._v(" "),i("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}},nativeOn:{click:function(t){return e.deleteItem(t)}}},[e._v("Agree")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-btn",e._g({attrs:{color:"primary",dark:""}},s),[e._v("\n          New group\n        ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-text-field",{attrs:{label:"Group name",rules:e.nameRules,required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-autocomplete",{attrs:{disabled:e.isUpdating,items:e.abilitiesId,chips:"",color:"blue-grey lighten-2",label:"Abilities","item-text":"name","item-value":"id",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",{staticClass:"chip--select-multi",attrs:{"input-value":t.selected,close:""},on:{"click:close":function(i){return e.removeAbility(t.item)}}},[e._v("\n                  "+e._s(t.item.name)+"\n                ")])]}},{key:"item",fn:function(t){return[[i("v-list-tile-content",{domProps:{textContent:e._s(t.item.name)}})]]}}]),model:{value:e.editedItem.abilities,callback:function(t){e.$set(e.editedItem,"abilities",t)},expression:"editedItem.abilities"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(t){return e.close(t)}}},[e._v("Cancel")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},nativeOn:{click:function(t){return e.save(t)}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?i("v-data-table",{attrs:{headers:e.headers,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.abilities",fn:function(t){var s=t.item;return e._l(s.relationships.abilities,function(t){return i("span",[i("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1)})}},{key:"item.actions",fn:function(t){var s=t.item;return[i("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.editItem(s)}}},[i("v-icon",{attrs:{color:"teal"}},[e._v("edit")])],1),e._v(" "),i("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.deleteDialog(s)}}},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1)]}}],null,!1,452334370)},[e._v(" "),e._v(" "),i("template",{slot:"no-data"},[i("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])],1)],2):e._e()],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=9.e1ffe8db42e8910628b8.js.map